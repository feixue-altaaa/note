# 什么是数据库

+ DB：数据库（Database）即存储数据的“仓库”。它保存了一系列有组织的数据

# 为什么要使用数据库

#### 持久化(persistence)

+ 把数据保存到可掉电式存储设备中以供之后使用。持久化的大多数时候是将内存中的数据存储在数据库中，当然也可以存储在磁盘文件、XML数据文件中

#### 方便管理数据（例如：快速的检索等）

#### 数据共享

+ 通过使用一个数据库，多个用户能够共享数据。每个用户可根据需要查询和更新这些数据，增强了数据的有效性和准确性

#### 数据保护

+ 数据库可以提供一系列功能来保护数据的安全性和完整性。这些功能包括访问控制、数据备份、数据加密等。这些功能可以帮助保护重要数据免遭非法访问和误操作

#### 数据一致性

+ 使用数据库可以提高数据一致性，即不同用户使用同一数据，可以避免数据的冲突和重复操作。如果不使用数据库，每个用户会独立地处理数据，这可能导致数据的不一致性

#### 数据可靠性

+ 通过数据库管理系统，数据存储在数据文件中，可以定期备份，使得数据在意外出现系统故障或硬件损坏时，不会出现数据丢失问题，从而保证数据的可靠性

#### 数据操作的规范性和可扩展性

+ 数据库支持SQL等规范化的数据操作语言，可以帮助控制数据操作的规范性。并且，数据库提供了容量和性能的可扩展性，可以根据需求进行扩展和升级，使其更适合于大型、高并发的应用场景

# SQL数据库

## 什么是SQL

+ SQL （**S**tructured **Q**uery **L**anguage ）代表数据库处理的语言

+ 使用 SQL，可以编写数据库查询以和数据库进行通信。查询可以是用于执行任何 CRUD（创建、读取、更新、删除）操作的命令

## 什么是关系数据库

+ 关系型数据库是信息的集合，它以预定义的关系组织数据，数据存储在一个或多个由列和行构成的表（或“关系”）中，用户可以轻松查看和理解不同数据结构之间的关系。关系是不同表之间的逻辑连接，根据这些表之间的交互建立

+ 关系数据库（或 SQL 数据库）已经存在了一段时间。第一个关系数据库出现在 1970 年，关系数据库至今仍然很流行，一些最常见的如

  - [PostgreSQL](https://www.postgresql.org/)

  - [Microsoft SQL Server](https://www.microsoft.com/en-us/sql-server/sql-server-downloads)

  - [MySQL](https://www.mysql.com/)

  - [Oracle](https://www.oracle.com/index.html)

  - [SQLite](https://sqlite.org/index.html)


## 关系数据库的存储方式

- 关系数据库以**结构化和表**的方式存储数据。也就是说，它将信息存储在**表**中，可以将其视为数据的存储容器。
- 关系数据库具有严格的、静态的预定义逻辑**架构（schema）**。可以将数据库架构视为一个组织蓝图——一组规则：哪些可以插入表、哪些不能插入表、以及如何设置数据
- 在每个表中，至少有一个**列（column）**。这些列具有特定的数据类型，例如 `INTEGER` 或 `VARCHAR`。在 `employees` 表中，一些列可能是 `employee_id`、`name`、`department`、`email` 和 `salary`
- 所有列和其数据类型构成架构

## 关系数据库的特点

### 关系型数据库的优势

-  采用二维表结构非常贴近正常开发逻辑（关系型数据模型相对层次型数据模型和网状型数据模型等其他模型来说更容易理解）；  
-  支持通用的SQL（结构化查询语言）语句，可以用SQL句子多个表之间做非常繁杂的查询；  
-  丰富的完整性大大减少了数据冗余和数据不一致的问题。并且全部由表结构组成，文件格式一致；  
-  提供对事务的支持，能保证系统中事务的正确执行
-  数据存储在磁盘中，安全可靠

### 关系型数据库存在的不足

>  **随着互联网企业的不断发展，数据日益增多，因此关系型数据库面对海量的数据会存在很多的不足**

-  **高并发读写能力差**：网站类用户的并发性访问非常高，而一台数据库的**最大连接数有限，且硬盘 I/O 有限**，不能满足很多人同时连接
-  **海量数据情况下读写效率低**：对[大数据](https://cloud.tencent.com/solution/bigdata?from=10680)量的表进行读写操作时，需要等待较长的时间等待响应
-  **数据模型灵活度低**：关系型数据库的数据模型定义严格，无法快速容纳新的数据类型（需要提前知道需要存储什么样类型的数据）
-  **可扩展性不足**：不像web server和app server那样简单的添加硬件和服务节点来拓展性能和负荷工作能力

# NoSQL数据库

## 什么是NoSQL数据库

+ 非关系数据库不以表格式存储和组织数据。不同数据点之间没有表、行、列或关系

+ 相反，数据存储在**集合**中。数据库通常是非结构化的并使用动态架构

+ 一些最流行的非关系数据库

  - [MongoDB](https://www.mongodb.com/)

  - [Redis](https://redis.io/)

  - [Apache Cassandra](https://cassandra.apache.org/_/index.html)

  - [Google Cloud Bigtable](https://cloud.google.com/bigtable)

  - [Amazon DynamoDB](https://aws.amazon.com/dynamodb/)


## 非关系数据库的类型

有四种主要类型的非关系数据库

- **列式数据库**
- **键-值数据库**
- **面向文档的数据库**
- **图数据库**

## 非关系型数据库特点

### 非关系型数据库的优势

-  **可存储多种数据格式**。非关系型[数据库存储](https://cloud.tencent.com/product/crs?from=10680)数据的格式可以是 key-value 形式、文档形式、图片形式等。使用灵活，应用场景广泛，而关系型数据库则只支持基础类型  
-  **速度快，效率高**。 NoSQL 可以使用硬盘或者随机存储器作为载体，而关系型数据库只能使用硬盘
-  海量**数据的维护和处理非常轻松**，成本低
-  **扩展简单、高并发、高稳定性、成本低廉的优势**
-  可以实现**数据的分布式处理**

### 非关系型数据库存在的不足

-  非关系型数据库暂时不提供 SQL 支持，学习和使用成本较高
-  非关系数据库没有回滚，不能完全保证原子性，无法保证数据的完整性和安全性。适合处理海量数据，但是不一定安全
-  功能没有关系型数据库完善
-  复杂表关联查询不容易实现

## 非关系数据库中的 BASE 属性

非关系数据库提供 BASE 数据库一致性模型。该模型不像关系数据库的 ACID 模型那样严格

BASE 是以下的首字母缩写词：

- **B**asic **A**vailability 基本可用，该模型不关注数据的即时一致性。但是，该系统似乎在持续工作，并始终保证数据的可用性

- **S**oft 软状态，由于缺乏即时一致性，系统的状态可能会随着时间而改变。软状态意味着系统不需要写一致性

- **E**ventual 最终一致性，主要优先事项是数据的持续可用，而不是数据一致性。但是，最终在某个时候，可以期望数据是一致的。当系统停止接收输入时，可能会发生这种情况

# SQL 和 NoSQL 数据库对比

- 成本
  - Nosql数据库很容易部署，基本上是开源软件，无需像Oracle那样花费大量成本购买，比关系数据库便宜
- 查询速度
  - Nosql数据库将数据存储在高速缓存中，不需要对SQL层进行分析。关系数据库在硬盘上存储数据，自然的查询速度远比Nosql数据库慢
- 存储数据的格式
  - Nosql的存储格式是key-value形式、文档形式、图片形式等等，所以可以存储基础类型以及对象或者是集合等各种格式，而数据库则只支持基础类型
- 扩展性
  - 关系型数据库有类似join这样的多表查询机制的限制导致扩展很艰难。Nosql基于键值对，数据之间没有耦合性，所以非常容易水平扩展
- 持久存储
  - Nosql不使用于持久存储，海量数据的持久存储，还是需要关系型数据库
- 数据一致性
  - 非关系数据库通常强调数据的最终一致性，而不是像关系数据库那样强烈的数据一致性，以及从非关系数据库读取的数据可能仍处于中间状态

# BASE怎么实现
